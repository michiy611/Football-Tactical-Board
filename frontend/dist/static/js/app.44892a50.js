(function(){"use strict";var e={6326:function(e,t,o){var n=o(9963),i=o(6252);const r=(0,i._)("div",{class:"text"},"Tactical Board",-1);function s(e,t,o,n,s,a){const c=(0,i.up)("CreateImage"),u=(0,i.up)("PlayerCircle");return(0,i.wg)(),(0,i.iD)("div",null,[r,(0,i.Wm)(c),(0,i.Wm)(u)])}var a=o(3577);const c={class:"container"},u={class:"board"},l=["onMousedown","fill","stroke","rx","cx","cy","r"];function d(e,t,o,n,r,s){return(0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("div",u,[((0,i.wg)(),(0,i.iD)("svg",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.rects,((t,o)=>((0,i.wg)(),(0,i.iD)("circle",{key:o,onMousedown:e=>s.move(e,o),fill:t.color,stroke:t.stroke,rx:t.rx,cx:t.x,cy:t.y,r:r.radius},(0,a.zw)(e.message),41,l)))),128))]))])])}var h={data(){return{ratio:1,dx:0,dy:0,viewport:"0 0 500 500",isMove:!1,beforeMouseX:null,beforeMouseY:null,selectIdx:0,radius:window.innerWidth/90,rects:[{x:30,y:40,color:"rgb(192, 192, 192)",stroke:"black",team:"home"},{x:30,y:50,color:"red",stroke:"black",team:"away"}]}},mounted(){console.log("MOUNT LISTENER ON"),document.addEventListener("mouseup",this.mouseUp),document.addEventListener("mousemove",this.mouseMove)},beforeUnmount(){console.log("MOUNT LISTENER OFF"),document.removeEventListener("mouseup",this.mouseUp),document.removeEventListener("mousemove",this.mouseMove)},methods:{move(e,t){this.isMove=!0,this.selectIdx=t,e.preventDefault()},mouseUp(e){this.isMove=!1,this.beforeMouseX=null,this.beforeMouseY=null,e.preventDefault()},mouseMove(e){if(this.isMove){var t=e.offsetX*this.ratio+this.dx,o=e.offsetY*this.ratio+this.dy,n=0,i=0;this.beforeMouseX&&this.beforeMouseY&&(n=t-this.beforeMouseX,i=o-this.beforeMouseY),this.beforeMouseX=t,this.beforeMouseY=o;var r=n+Number(this.rects[this.selectIdx].x),s=i+Number(this.rects[this.selectIdx].y);r>0&&(this.rects[this.selectIdx].x=r),s>0&&(this.rects[this.selectIdx].y=s),e.preventDefault()}}}},v=o(3744);const m=(0,v.Z)(h,[["render",d]]);var f=m;const p={id:"app"},g={for:"input-video"},b={key:0,controls:"",id:"video"},w=["src"],y=["src"];function x(e,t,o,n,r,s){return(0,i.wg)(),(0,i.iD)("div",p,[(0,i._)("label",g,(0,a.zw)(r.isLoading?"読み込み中...":"動画を選択"),1),(0,i._)("input",{id:"input-video",type:"file",accept:"video/mp4,video/x-m4v",onChange:t[0]||(t[0]=(...e)=>s.handleFileSelect&&s.handleFileSelect(...e))},null,32),r.src?((0,i.wg)(),(0,i.iD)("video",b,[(0,i._)("source",{src:r.src,type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'},null,8,w)])):(0,i.kq)("",!0),(0,i._)("img",{class:"image",src:r.image},null,8,y),(0,i._)("button",{id:"snap",onClick:t[1]||(t[1]=e=>s.onUploadImage())},"このシーンをインポート")])}o(7658);var M=o(8945);const I="http://127.0.0.1:5000";var k={data(){return{src:null,image:[],time:0,isLoading:!1,uploadedImage:""}},methods:{handleFileSelect(e){this.src=null,this.selected=0;const t=e.target.files[0];if(!t||!t.type.match("video/*"))return;const o=new FileReader;o.onload=e=>{this.src=e.target.result,this.isLoading=!1},o.readAsDataURL(t),this.isLoading=!0},onUploadImage(){this.image=[];const e=document.createElement("canvas"),t=e.getContext("2d"),o=document.getElementById("video");e.width=o.videoWidth,e.height=o.videoHeight,this.time=o.currentTime,o.pause(),t.drawImage(o,0,0,o.videoWidth,o.videoHeight),this.image.push(e.toDataURL("image/png"));let n=new FileReader;n.onload=e=>{this.uploadedImage=e.target.result},console.log(this.uploadedImage);var i=new FormData;i.append("image",this.uploadedImage),M.Z.post(`${I}/detect`,i).then((function(e){console.log(e)}))}}};const O=(0,v.Z)(k,[["render",x],["__scopeId","data-v-55caf223"]]);var D=O,E={name:"App",components:{CreateImage:D,PlayerCircle:f}};const L=(0,v.Z)(E,[["render",s]]);var U=L;(0,n.ri)(U).mount("#app")}},t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,n,i,r){if(!n){var s=1/0;for(l=0;l<e.length;l++){n=e[l][0],i=e[l][1],r=e[l][2];for(var a=!0,c=0;c<n.length;c++)(!1&r||s>=r)&&Object.keys(o.O).every((function(e){return o.O[e](n[c])}))?n.splice(c--,1):(a=!1,r<s&&(s=r));if(a){e.splice(l--,1);var u=i();void 0!==u&&(t=u)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[n,i,r]}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,r,s=n[0],a=n[1],c=n[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(c)var l=c(o)}for(t&&t(n);u<s.length;u++)r=s[u],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(l)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(6326)}));n=o.O(n)})();
//# sourceMappingURL=app.44892a50.js.map