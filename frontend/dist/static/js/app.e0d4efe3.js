(function(){"use strict";var e={2727:function(e,t,o){var s=o(9963),i=o(6252),r=o(3577);const n=(0,i._)("div",{class:"text"},"Tactical Board",-1),u=(0,i._)("h1",null,"afafa",-1);function l(e,t,o,s,l,a){const c=(0,i.up)("CreateImage"),d=(0,i.up)("PlayerCircle");return(0,i.wg)(),(0,i.iD)("div",null,[n,(0,i.Wm)(c,{onMyClick:t[0]||(t[0]=e=>a.emitData())}),(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.results,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},(0,r.zw)(e),1)))),128))]),u,(0,i.Wm)(d,{results:l.results},null,8,["results"])])}const a={class:"container"},c={class:"board"},d=["onMousedown","fill","stroke","rx","cx","cy","r"];function h(e,t,o,s,n,u){return(0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("div",c,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.results,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},(0,r.zw)(e),1)))),128))]),((0,i.wg)(),(0,i.iD)("svg",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.rects,((t,o)=>((0,i.wg)(),(0,i.iD)("circle",{key:o,onMousedown:e=>u.move(e,o),fill:t.color,stroke:t.stroke,rx:t.rx,cx:t.x,cy:t.y,r:n.radius},(0,r.zw)(e.message),41,d)))),128))]))])])}var v={props:"results",data(){return{ratio:1,dx:0,dy:0,viewport:"0 0 500 500",isMove:!1,beforeMouseX:null,beforeMouseY:null,selectIdx:0,radius:window.innerWidth/90,rects:[{x:30,y:40,color:"rgb(192, 192, 192)",stroke:"black",team:"home"},{x:30,y:50,color:"red",stroke:"black",team:"away"}]}},mounted(){console.log("MOUNT LISTENER ON"),document.addEventListener("mouseup",this.mouseUp),document.addEventListener("mousemove",this.mouseMove)},beforeUnmount(){console.log("MOUNT LISTENER OFF"),document.removeEventListener("mouseup",this.mouseUp),document.removeEventListener("mousemove",this.mouseMove)},methods:{move(e,t){this.isMove=!0,this.selectIdx=t,e.preventDefault()},mouseUp(e){this.isMove=!1,this.beforeMouseX=null,this.beforeMouseY=null,e.preventDefault()},mouseMove(e){if(this.isMove){var t=e.offsetX*this.ratio+this.dx,o=e.offsetY*this.ratio+this.dy,s=0,i=0;this.beforeMouseX&&this.beforeMouseY&&(s=t-this.beforeMouseX,i=o-this.beforeMouseY),this.beforeMouseX=t,this.beforeMouseY=o;var r=s+Number(this.rects[this.selectIdx].x),n=i+Number(this.rects[this.selectIdx].y);r>0&&(this.rects[this.selectIdx].x=r),n>0&&(this.rects[this.selectIdx].y=n),e.preventDefault()}}}},m=o(3744);const f=(0,m.Z)(v,[["render",h]]);var p=f;const g=e=>((0,i.dD)("data-v-67835d69"),e=e(),(0,i.Cn)(),e),w={id:"app"},b={for:"input-video"},y={key:0,controls:"",id:"video"},x=["src"],M=["src"],k=g((()=>(0,i._)("h2",null,"Results",-1)));function D(e,t,o,s,n,u){return(0,i.wg)(),(0,i.iD)("div",w,[(0,i._)("label",b,(0,r.zw)(n.isLoading?"読み込み中...":"動画を選択"),1),(0,i._)("input",{id:"input-video",type:"file",accept:"video/mp4,video/x-m4v",onChange:t[0]||(t[0]=(...e)=>u.handleFileSelect&&u.handleFileSelect(...e))},null,32),n.src?((0,i.wg)(),(0,i.iD)("video",y,[(0,i._)("source",{src:n.src,type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'},null,8,x)])):(0,i.kq)("",!0),(0,i._)("img",{class:"image",src:n.image},null,8,M),(0,i._)("button",{id:"snap",onClick:t[1]||(t[1]=e=>u.onUploadImage())},"このシーンをインポート"),k])}o(7658);var I=o(8945);const O="http://127.0.0.1:5000";var E={data(){return{src:null,image:[],time:0,isLoading:!1,uploadedImage:"",results:[]}},methods:{handleFileSelect(e){this.src=null,this.selected=0;const t=e.target.files[0];if(!t||!t.type.match("video/*"))return;const o=new FileReader;o.onload=e=>{this.src=e.target.result,this.isLoading=!1},o.readAsDataURL(t),this.isLoading=!0},onUploadImage(){let e=this;this.image=[];const t=document.createElement("canvas"),o=t.getContext("2d"),s=document.getElementById("video");t.width=s.videoWidth,t.height=s.videoHeight,this.time=s.currentTime,s.pause(),o.drawImage(s,0,0,s.videoWidth,s.videoHeight),this.image.push(t.toDataURL("image/png"));var i=new FormData;i.append("image",this.image),I.Z.post(`${O}/detect`,i).then((function(t){e.results=t.data.results;for(const o of e.results)console.log(o)})),this.$emit("my-click",this.results)}}};const _=(0,m.Z)(E,[["render",D],["__scopeId","data-v-67835d69"]]);var L=_,C={name:"App",components:{CreateImage:L,PlayerCircle:p},data(){return{results:[]}},methods:{emitData(e){this.results=e}}};const U=(0,m.Z)(C,[["render",l]]);var Y=U;(0,s.ri)(Y).mount("#app")}},t={};function o(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,s,i,r){if(!s){var n=1/0;for(c=0;c<e.length;c++){s=e[c][0],i=e[c][1],r=e[c][2];for(var u=!0,l=0;l<s.length;l++)(!1&r||n>=r)&&Object.keys(o.O).every((function(e){return o.O[e](s[l])}))?s.splice(l--,1):(u=!1,r<n&&(n=r));if(u){e.splice(c--,1);var a=i();void 0!==a&&(t=a)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[s,i,r]}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,r,n=s[0],u=s[1],l=s[2],a=0;if(n.some((function(t){return 0!==e[t]}))){for(i in u)o.o(u,i)&&(o.m[i]=u[i]);if(l)var c=l(o)}for(t&&t(s);a<n.length;a++)r=n[a],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(c)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(2727)}));s=o.O(s)})();
//# sourceMappingURL=app.e0d4efe3.js.map